!function(e){var t={};function n(a){if(t[a])return t[a].exports;var o=t[a]={i:a,l:!1,exports:{}};return e[a].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(a,o,function(t){return e[t]}.bind(null,o));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=15)}([function(e,t){e.exports=require("react")},function(e,t){e.exports=require("react-router-dom")},function(e,t){e.exports=require("express")},function(e,t,n){var a=n(4),o=n(16);e.exports=a.model("Product",o)},function(e,t){e.exports=require("mongoose")},function(e,t){e.exports=require("react-dom/server")},function(e,t){e.exports=require("path")},function(e,t){e.exports=require("multer")},function(e,t){e.exports=require("http-errors")},function(e,t){e.exports=require("cookie-parser")},function(e,t){e.exports=require("morgan")},function(e,t){e.exports=require("react-table")},function(e,t){e.exports=require("axios")},function(e,t){e.exports=require("unique-random")},function(e,t){e.exports=require("dotenv")},function(e,t,n){"use strict";n.r(t);var a=n(4),o=n.n(a),r=n(8),i=n.n(r),l=n(2),s=n.n(l),c=n(6),u=n.n(c),d=n(9),m=n.n(d),p=n(10),h=n.n(p),g=n(5),f=n.n(g),b=n(0),y=n.n(b),v=n(1);var C=function(e){return y.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light"},y.a.createElement("a",{className:"navbar-brand",href:"#"},"Navbar"),y.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"},y.a.createElement("span",{className:"navbar-toggler-icon"})),y.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarNav"},y.a.createElement("ul",{className:"navbar-nav"},y.a.createElement("li",{className:"nav-item active"},y.a.createElement("a",{className:"nav-link",href:"/"},"Home ",y.a.createElement("span",{className:"sr-only"},"(current)"))),y.a.createElement("li",{className:"nav-item"},y.a.createElement("a",{className:"nav-link",href:"/create"},"Create Product")))))},E=n(11),S=n.n(E);function N(e){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function H(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function P(e,t){return!t||"object"!==N(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var _=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),P(this,j(t).call(this,e))}var n,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(t,y.a.Component),n=t,(a=[{key:"render",value:function(){var e=[{Header:"Status",accessor:"status",filterable:!0},{Header:"Title",accessor:"title",Cell:function(e){return 4===e.original.stage?y.a.createElement("a",{href:"/product/".concat(e.original._id)},e.value):y.a.createElement("a",{href:"/create/".concat(e.original._id)},e.value)}},{Header:"Price",accessor:"listedPrice",filterable:!0},{Header:"Category",accessor:"category"},{Header:"SKU",accessor:"SKU",filterable:!0}];return y.a.createElement(S.a,{columns:e,data:this.props.data,filterble:!0,defaultPageSize:20,noDataText:"Please wait..."})}}])&&H(n.prototype,a),o&&H(n,o),t}();function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function k(e,t){return!t||"object"!==w(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function D(e,t){return(D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var T=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),k(this,R(t).call(this,e))}var n,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}(t,y.a.Component),n=t,(a=[{key:"render",value:function(){return y.a.createElement(b.Fragment,null,y.a.createElement(_,{data:this.props.objs}))}}])&&x(n.prototype,a),o&&x(n,o),t}();var q=Object(v.withRouter)(function(e){return y.a.createElement(b.Fragment,null,y.a.createElement("form",null,y.a.createElement("div",{className:"form-group"},y.a.createElement("label",{htmlFor:"clientCode"},"Client Code"),y.a.createElement("input",{onChange:function(t){return e.onClientCodeChangeHandler(t)},type:"text",className:"form-control",placeholder:"Enter Client Code",id:"clientCode",value:e.clientCode})),y.a.createElement("div",{className:"form-group"},y.a.createElement("label",{htmlFor:"title"},"Title"),y.a.createElement("input",{onChange:function(t){return e.onTitleChangeHandler(t)},type:"text",className:"form-control",placeholder:"Enter Title",id:"title",value:e.title})),y.a.createElement("div",{className:"form-group"},y.a.createElement("label",{htmlFor:"brand"},"Brand"),y.a.createElement("input",{onChange:function(t){return e.onBrandChangeHandler(t)},type:"text",className:"form-control",placeholder:"Enter Brand",id:"brand",value:e.brand})),y.a.createElement("div",{className:"form-group"},y.a.createElement("label",{htmlFor:"model-number"},"Model Number"),y.a.createElement("input",{onChange:function(t){return e.onModelNumberChangeHandler(t)},type:"text",className:"form-control",placeholder:"Enter Model Number",id:"model-number",value:e.modelNumber})),y.a.createElement("div",{className:"form-group"},y.a.createElement("label",{htmlFor:"dimensions"},"Dimensions"),y.a.createElement("input",{onChange:function(t){return e.onDimensionsChangeHandler(t)},type:"text",className:"form-control",placeholder:"Enter Dimensions",id:"dimensions",value:e.dimensions})),y.a.createElement("div",{className:"form-group"},y.a.createElement("label",{htmlFor:"weight"},"Weight"),y.a.createElement("input",{onChange:function(t){return e.onWeightChangeHandler(t)},type:"text",className:"form-control",placeholder:"Enter Weight",id:"weight",value:e.weight})),y.a.createElement("div",{className:"form-group"},y.a.createElement("label",{htmlFor:"quantity"},"Quantity"),y.a.createElement("input",{onChange:function(t){return e.onQuantityChangeHandler(t)},type:"text",className:"form-control",placeholder:"Enter Quantity",id:"quantity",value:e.quantity})),y.a.createElement("div",{className:"form-group"},y.a.createElement("label",{htmlFor:"category"},"Category"),y.a.createElement("input",{onChange:function(t){return e.onCategoryChangeHandler(t)},type:"text",className:"form-control",placeholder:"Enter Category",id:"category",value:e.category})),y.a.createElement("button",{onClick:e.onSubmitHandler,className:"btn btn-primary"},"Save and Exit"),y.a.createElement("button",{onClick:e.onNextHandler,className:"btn btn-primary"}," Next Page")))});var U=function(e){return y.a.createElement("form",null,y.a.createElement("div",{className:"form-group"},y.a.createElement("label",{htmlFor:"description"},"Description"),y.a.createElement("input",{onChange:function(t){return e.onDescriptionChangeHandler(t)},type:"text",className:"form-control",placeholder:"Enter Description",id:"description",value:e.description})),y.a.createElement("div",{className:"form-group"},y.a.createElement("label",{htmlFor:"location"},"Location"),y.a.createElement("input",{onChange:function(t){return e.onLocationChangeHandler(t)},type:"text",className:"form-control",placeholder:"Enter Location",id:"location",value:e.location})),y.a.createElement("div",{className:"file-uploader"},y.a.createElement("input",{onChange:function(t){return e.onImagesUploadChangeHandler(t)},type:"file",accept:"image/*",multiple:!0})),y.a.createElement("button",{onClick:e.onSubmitHandler,className:"btn btn-primary"},"Save and Exit"),2===e.stage?null:y.a.createElement("button",{onClick:e.onBackHandler,className:"btn btn-primary"},"Back"),y.a.createElement("button",{onClick:e.onNextHandler,className:"btn btn-primary"}," Next Page"))};var I=function(e){return y.a.createElement("form",null,y.a.createElement("div",{className:"form-group"},y.a.createElement("label",{htmlFor:"listedPrice"},"Listed Price"),y.a.createElement("input",{onChange:function(t){return e.onListedPriceChangeHandler(t)},type:"text",className:"form-control",placeholder:"Enter ListedPrice",id:"listedPrice",value:e.listedPrice})),y.a.createElement("div",{className:"form-group"},y.a.createElement("label",{htmlFor:"sellingPrice"},"Selling Price"),y.a.createElement("input",{onChange:function(t){return e.onSellingPriceChangeHandler(t)},type:"text",className:"form-control",placeholder:"Enter Selling Price",id:"sellingPrice",value:e.sellingPrice})),y.a.createElement("div",{className:"form-group"},y.a.createElement("label",{htmlFor:"reserve"},"Reserve"),y.a.createElement("input",{onChange:function(t){return e.onReserveChangeHandler(t)},type:"text",className:"form-control",placeholder:"Enter Reserve",id:"reserve",value:e.reserve})),y.a.createElement("button",{onClick:e.onSubmitHandler,className:"btn btn-primary"},"Save and Exit"),3===e.stage?null:y.a.createElement("button",{onClick:e.onBackHandler,className:"btn btn-primary"},"Back"))},M=n(12),J=n.n(M);function F(e){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function L(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function B(e,t){return!t||"object"!==F(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function K(e,t){return(K=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var W=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=B(this,A(t).call(this,e)),console.log("this.props.obj等于"+n.props.obj),console.log("__isBrowser = "+!1),null===n.props.obj&&(n.state={_id:null,clientCode:null,title:null,brand:null,modelNumber:null,dimensions:null,weight:null,quantity:null,category:null,location:null,description:null,photos:null,listedPrice:null,sellingPrice:null,reserve:null,page:1,images:[],imagesUpload:[],SKU:null}),null!==n.props.obj&&(n.state={_id:n.props.obj._id,clientCode:n.props.obj.clientCode,title:n.props.obj.title,brand:n.props.obj.brand,modelNumber:n.props.obj.modelNumber,dimensions:n.props.obj.dimensions,weight:n.props.obj.weight,quantity:n.props.obj.quantity,category:n.props.obj.category,location:n.props.obj.location,description:n.props.obj.description,photos:n.props.obj.photos,listedPrice:n.props.obj.listedPrice,sellingPrice:n.props.obj.sellingPrice,reserve:n.props.obj.reserve,page:n.props.obj.stage,images:n.props.obj.images,imagesUpload:[],SKU:n.props.obj.SKU}),n}var n,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&K(e,t)}(t,y.a.Component),n=t,(a=[{key:"onClientCodeChangeHandler",value:function(e){console.log("clientCode Changed"),this.setState({clientCode:e.target.value})}},{key:"onTitleChangeHandler",value:function(e){console.log("title changed"),this.setState({title:e.target.value})}},{key:"onBrandChangeHandler",value:function(e){console.log("bd changed"),this.setState({brand:e.target.value})}},{key:"onModelNumberChangeHandler",value:function(e){console.log("mn changed"),this.setState({modelNumber:e.target.value})}},{key:"onDimensionsChangeHandler",value:function(e){console.log("dm changed"),this.setState({dimensions:e.target.value})}},{key:"onWeightChangeHandler",value:function(e){console.log("wt changed"),this.setState({weight:e.target.value})}},{key:"onQuantityChangeHandler",value:function(e){console.log("qt changed"),this.setState({quantity:e.target.value})}},{key:"onCategoryChangeHandler",value:function(e){console.log("ca changed"),this.setState({category:e.target.value})}},{key:"onNextHandler",value:function(){var e=this.state;this.setState({page:e.page+1})}},{key:"onBackHandler",value:function(){var e=this.state;this.setState({page:e.page-1})}},{key:"onSubmitHandler",value:function(e){e.preventDefault();var t=new FormData;t.append("_id",JSON.stringify(this.state._id)),t.append("clientCode",JSON.stringify(this.state.clientCode)),t.append("title",JSON.stringify(this.state.title)),t.append("brand",JSON.stringify(this.state.brand)),t.append("modelNumber",JSON.stringify(this.state.modelNumber)),t.append("dimensions",JSON.stringify(this.state.dimensions)),t.append("weight",JSON.stringify(this.state.weight)),t.append("quantity",JSON.stringify(this.state.quantity)),t.append("category",JSON.stringify(this.state.category)),t.append("location",JSON.stringify(this.state.location)),t.append("description",JSON.stringify(this.state.description)),t.append("photos",JSON.stringify(this.state.photos)),t.append("listedPrice",JSON.stringify(this.state.listedPrice)),t.append("sellingPrice",JSON.stringify(this.state.sellingPrice)),t.append("reserve",JSON.stringify(this.state.reserve)),t.append("SKU",JSON.stringify(this.state.SKU)),t.append("images",JSON.stringify(this.state.images));var n=this.state.page+1;t.append("stage",JSON.stringify(n));for(var a=this.state.imagesUpload,o=0;o<a.length;o++)t.append("imagesUpload",a[o]);console.log("客户端imagesUpload是"+a),J.a.post("/create",t).then(function(e){window.alert("Data Saved"),window.location.href="/"}).catch(function(e){e.response?(console.log(e.response.data),console.log(e.response.status),console.log(e.response.headers)):e.request?console.log(e.request):console.log("Error",e.message),console.log(e.config)})}},{key:"onDescriptionChangeHandler",value:function(e){this.setState({description:e.target.value})}},{key:"onLocationChangeHandler",value:function(e){this.setState({location:e.target.value})}},{key:"onListedPriceChangeHandler",value:function(e){this.setState({listedPrice:e.target.value})}},{key:"onSellingPriceChangeHandler",value:function(e){this.setState({sellingPrice:e.target.value})}},{key:"onReserveChangeHandler",value:function(e){this.setState({reserve:e.target.value})}},{key:"onImagesUploadChangeHandler",value:function(e){console.log("新图片载入"),console.log(e.target.value),console.log(e.target.files),this.setState({imagesUpload:e.target.files})}},{key:"render",value:function(){var e;return e=null!==this.props.obj?this.props.obj.stage:null,1===this.state.page?y.a.createElement(q,{clientCode:this.state.clientCode,title:this.state.title,brand:this.state.brand,modelNumber:this.state.modelNumber,dimensions:this.state.dimensions,weight:this.state.weight,quantity:this.state.quantity,category:this.state.category,onClientCodeChangeHandler:this.onClientCodeChangeHandler.bind(this),onTitleChangeHandler:this.onTitleChangeHandler.bind(this),onBrandChangeHandler:this.onBrandChangeHandler.bind(this),onModelNumberChangeHandler:this.onModelNumberChangeHandler.bind(this),onWeightChangeHandler:this.onWeightChangeHandler.bind(this),onQuantityChangeHandler:this.onQuantityChangeHandler.bind(this),onCategoryChangeHandler:this.onCategoryChangeHandler.bind(this),onDimensionsChangeHandler:this.onDimensionsChangeHandler.bind(this),onNextHandler:this.onNextHandler.bind(this),onSubmitHandler:this.onSubmitHandler.bind(this)}):2===this.state.page?y.a.createElement(U,{description:this.state.description,location:this.state.location,imagesUpload:this.state.imagesUpload,onDescriptionChangeHandler:this.onDescriptionChangeHandler.bind(this),onLocationChangeHandler:this.onLocationChangeHandler.bind(this),onImagesUploadChangeHandler:this.onImagesUploadChangeHandler.bind(this),onNextHandler:this.onNextHandler.bind(this),onBackHandler:this.onBackHandler.bind(this),onSubmitHandler:this.onSubmitHandler.bind(this),stage:e}):3===this.state.page?y.a.createElement(I,{listedPrice:this.state.listedPrice,sellingPrice:this.state.sellingPrice,reserve:this.state.reserve,onListedPriceChangeHandler:this.onListedPriceChangeHandler.bind(this),onSellingPriceChangeHandler:this.onSellingPriceChangeHandler.bind(this),onReserveChangeHandler:this.onReserveChangeHandler.bind(this),onSubmitHandler:this.onSubmitHandler.bind(this),onBackHandler:this.onBackHandler.bind(this),stage:e}):void 0}}])&&L(n.prototype,a),o&&L(n,o),t}();var Q=function(e){return console.log("props.images是"+e.images),y.a.createElement("form",null,y.a.createElement("div",{className:"form-group"},y.a.createElement("label",{htmlFor:"clientCode"},"Client Code"),y.a.createElement("input",{onChange:function(t){return e.onClientCodeChangeHandler(t)},type:"text",className:"form-control",placeholder:"Enter Client Code",id:"clientCode",value:e.clientCode})),y.a.createElement("div",null,y.a.createElement("select",{onChange:function(t){return e.onStatusChangeHandler(t)}},"Pending List"===e.status?y.a.createElement("option",{value:"Pending List",selected:!0},"Pending List"):y.a.createElement("option",{value:"Pending List"},"Pending List"),"Item Available"===e.status?y.a.createElement("option",{value:"Item Available",selected:!0},"Item Available"):y.a.createElement("option",{value:"Item Available"},"Item Available"),"Item sold"===e.status?y.a.createElement("option",{value:"Item sold",selected:!0},"Item sold"):y.a.createElement("option",{value:"Item sold"},"Item sold"),"Pending Payment"===e.status?y.a.createElement("option",{value:"Pending Payment",selected:!0},"Pending Payment"):y.a.createElement("option",{value:"Pending Payment"},"Pending Payment"),function(){return"Seller Payout Completed"===e.status?y.a.createElement("option",{value:"Seller Payout Completed",selected:!0},"Seller Payout Completed"):y.a.createElement("option",{value:"Seller Payout Completed"},"Seller Payout Completed")})),y.a.createElement("div",{className:"form-group"},y.a.createElement("label",{htmlFor:"title"},"Title"),y.a.createElement("input",{onChange:function(t){return e.onTitleChangeHandler(t)},type:"text",className:"form-control",placeholder:"Enter Title",id:"title",value:e.title})),y.a.createElement("div",{className:"form-group"},y.a.createElement("label",{htmlFor:"brand"},"Brand"),y.a.createElement("input",{onChange:function(t){return e.onBrandChangeHandler(t)},type:"text",className:"form-control",placeholder:"Enter Brand",id:"brand",value:e.brand})),y.a.createElement("div",{className:"form-group"},y.a.createElement("label",{htmlFor:"model-number"},"Model Number"),y.a.createElement("input",{onChange:function(t){return e.onModelNumberChangeHandler(t)},type:"text",className:"form-control",placeholder:"Enter Model Number",id:"model-number",value:e.modelNumber})),y.a.createElement("div",{className:"form-group"},y.a.createElement("label",{htmlFor:"dimensions"},"Dimensions"),y.a.createElement("input",{onChange:function(t){return e.onDimensionsChangeHandler(t)},type:"text",className:"form-control",placeholder:"Enter Dimensions",id:"dimensions",value:e.dimensions})),y.a.createElement("div",{className:"form-group"},y.a.createElement("label",{htmlFor:"weight"},"Weight"),y.a.createElement("input",{onChange:function(t){return e.onWeightChangeHandler(t)},type:"text",className:"form-control",placeholder:"Enter Weight",id:"weight",value:e.weight})),y.a.createElement("div",{className:"form-group"},y.a.createElement("label",{htmlFor:"quantity"},"Quantity"),y.a.createElement("input",{onChange:function(t){return e.onQuantityChangeHandler(t)},type:"text",className:"form-control",placeholder:"Enter Quantity",id:"quantity",value:e.quantity})),y.a.createElement("div",{className:"form-group"},y.a.createElement("label",{htmlFor:"category"},"Category"),y.a.createElement("input",{onChange:function(t){return e.onCategoryChangeHandler(t)},type:"text",className:"form-control",placeholder:"Enter Category",id:"category",value:e.category})),y.a.createElement("div",{className:"form-group"},y.a.createElement("label",{htmlFor:"description"},"Description"),y.a.createElement("input",{onChange:function(t){return e.onDescriptionChangeHandler(t)},type:"text",className:"form-control",placeholder:"Enter Description",id:"description",value:e.description})),y.a.createElement("div",{className:"form-group"},y.a.createElement("label",{htmlFor:"location"},"Location"),y.a.createElement("input",{onChange:function(t){return e.onLocationChangeHandler(t)},type:"text",className:"form-control",placeholder:"Enter Location",id:"location",value:e.location})),y.a.createElement("div",{className:"form-group"},y.a.createElement("label",{htmlFor:"listedPrice"},"Listed Price"),y.a.createElement("input",{onChange:function(t){return e.onListedPriceChangeHandler(t)},type:"text",className:"form-control",placeholder:"Enter ListedPrice",id:"listedPrice",value:e.listedPrice})),y.a.createElement("div",{className:"form-group"},y.a.createElement("label",{htmlFor:"sellingPrice"},"Selling Price"),y.a.createElement("input",{onChange:function(t){return e.onSellingPriceChangeHandler(t)},type:"text",className:"form-control",placeholder:"Enter Selling Price",id:"sellingPrice",value:e.sellingPrice})),y.a.createElement("div",{className:"form-group"},y.a.createElement("label",{htmlFor:"reserve"},"Reserve"),y.a.createElement("input",{onChange:function(t){return e.onReserveChangeHandler(t)},type:"text",className:"form-control",placeholder:"Enter Reserve",id:"reserve",value:e.reserve})),y.a.createElement("div",{className:"form-group"},y.a.createElement("label",{htmlFor:"SKU"},"SKU"),y.a.createElement("input",{onChange:function(t){return e.onSKUChangeHandler(t)},type:"text",className:"form-control",placeholder:"Enter SKU",id:"SKU",value:e.SKU})),y.a.createElement("div",{className:"radio"},y.a.createElement("label",null,"Wiretransfer"===e.paymentMethod?y.a.createElement("input",{type:"radio",name:"optionsRadios",id:"optionsRadios1",value:"Wiretransfer",checked:!0,onChange:function(t){return e.onPaymentMethodChangeHandler(t)}}):y.a.createElement("input",{type:"radio",name:"optionsRadios",id:"optionsRadios1",value:"Wiretransfer",onChange:function(t){return e.onPaymentMethodChangeHandler(t)}}),"Wiretransfer")),y.a.createElement("div",{className:"radio"},y.a.createElement("label",null,"Cash"===e.paymentMethod?y.a.createElement("input",{type:"radio",name:"optionsRadios",id:"optionsRadios2",value:"Cash",checked:!0,onChange:function(t){return e.onPaymentMethodChangeHandler(t)}}):y.a.createElement("input",{type:"radio",name:"optionsRadios",id:"optionsRadios2",value:"Cash",onChange:function(t){return e.onPaymentMethodChangeHandler(t)}}),"Cash")),y.a.createElement("div",{className:"radio"},y.a.createElement("label",null,(e.paymentMethod,y.a.createElement("input",{type:"radio",name:"optionsRadios",id:"optionsRadios3",value:"Paypal",onChange:function(t){return e.onPaymentMethodChangeHandler(t)}})),"Paypal")),y.a.createElement("div",{className:"radio"},y.a.createElement("label",null,(e.paymentMethod,y.a.createElement("input",{type:"radio",name:"optionsRadios",id:"optionsRadios4",value:"Cheque",onChange:function(t){return e.onPaymentMethodChangeHandler(t)}})),"Cheque")),y.a.createElement("div",{className:"radio"},y.a.createElement("label",null,(e.paymentMethod,y.a.createElement("input",{type:"radio",name:"optionsRadios",id:"optionsRadios5",value:"Credit Card",onChange:function(t){return e.onPaymentMethodChangeHandler(t)}})),"Credit Card")),y.a.createElement("div",{className:"form-group"},y.a.createElement("label",{htmlFor:"transactionDetails"},"Transaction Details"),y.a.createElement("input",{onChange:function(t){return e.onTransactionDetailsChangeHandler(t)},type:"text",className:"form-control",placeholder:"Enter Transaction Details",id:"transactionDetails",value:e.transactionDetails})),y.a.createElement("div",{className:"form-group"},y.a.createElement("label",{htmlFor:"amountReceived"},"Amount Received"),y.a.createElement("input",{onChange:function(t){return e.onAmountReceivedChangeHandler(t)},type:"text",className:"form-control",placeholder:"Enter Amount Received",id:"amountReceived",value:e.amountReceived})),e.images.map(function(e){var t=e.lastIndexOf("\\");return e="../images/"+e.substring(t+1,e.length),y.a.createElement("img",{src:e})}),y.a.createElement("button",{onClick:function(t){return e.onSubmitHandler(t)},className:"btn btn-primary"}," Submit"))};function z(e){return(z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function G(){return(G=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function V(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function X(e,t){return!t||"object"!==z(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Y(e){return(Y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Z(e,t){return(Z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var $=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),null!==(n=X(this,Y(t).call(this,e))).props.obj&&(n.state={_id:n.props.obj._id,status:n.props.obj.status,clientCode:n.props.obj.clientCode,title:n.props.obj.title,brand:n.props.obj.brand,modelNumber:n.props.obj.modelNumber,dimensions:n.props.obj.dimensions,weight:n.props.obj.weight,quantity:n.props.obj.quantity,category:n.props.obj.category,location:n.props.obj.location,description:n.props.obj.description,photos:n.props.obj.photos,listedPrice:n.props.obj.listedPrice,sellingPrice:n.props.obj.sellingPrice,reserve:n.props.obj.reserve,SKU:n.props.obj.SKU,paymentMethod:n.props.obj.paymentMethod,transactionDetails:n.props.obj.transactionDetails,amountReceived:n.props.obj.amountReceived,images:n.props.obj.images}),n}var n,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Z(e,t)}(t,y.a.Component),n=t,(a=[{key:"onClientCodeChangeHandler",value:function(e){console.log("clientCode Changed"),this.setState({clientCode:e.target.value})}},{key:"onTitleChangeHandler",value:function(e){console.log("title changed"),this.setState({title:e.target.value})}},{key:"onBrandChangeHandler",value:function(e){console.log("bd changed"),this.setState({brand:e.target.value})}},{key:"onModelNumberChangeHandler",value:function(e){console.log("mn changed"),this.setState({modelNumber:e.target.value})}},{key:"onDimensionsChangeHandler",value:function(e){console.log("dm changed"),this.setState({dimensions:e.target.value})}},{key:"onWeightChangeHandler",value:function(e){console.log("wt changed"),this.setState({weight:e.target.value})}},{key:"onQuantityChangeHandler",value:function(e){console.log("qt changed"),this.setState({quantity:e.target.value})}},{key:"onCategoryChangeHandler",value:function(e){console.log("ca changed"),this.setState({category:e.target.value})}},{key:"onDescriptionChangeHandler",value:function(e){this.setState({description:e.target.value})}},{key:"onLocationChangeHandler",value:function(e){this.setState({location:e.target.value})}},{key:"onListedPriceChangeHandler",value:function(e){this.setState({listedPrice:e.target.value})}},{key:"onSellingPriceChangeHandler",value:function(e){this.setState({sellingPrice:e.target.value})}},{key:"onReserveChangeHandler",value:function(e){this.setState({reserve:e.target.value})}},{key:"onImagesChangeHandler",value:function(e){}},{key:"onPaymentMethodChangeHandler",value:function(e){console.log(e.target.value),this.setState({paymentMethod:e.target.value})}},{key:"onTransactionDetailsChangeHandler",value:function(e){this.setState({transactionDetails:e.target.value})}},{key:"onAmountReceivedChangeHandler",value:function(e){this.setState({amountReceived:e.target.value})}},{key:"onStatusChangeHandler",value:function(e){this.setState({status:e.target.value})}},{key:"onSubmitHandler",value:function(e){e.preventDefault(),console.log("更新前数据"+this.state.status),J.a.put("/update/".concat(this.state._id),{_id:this.state._id,status:this.state.status,clientCode:this.state.clientCode,title:this.state.title,brand:this.state.brand,modelNumber:this.state.modelNumber,dimensions:this.state.dimensions,weight:this.state.weight,quantity:this.state.quantity,category:this.state.category,location:this.state.location,description:this.state.description,photos:this.state.photos,listedPrice:this.state.listedPrice,sellingPrice:this.state.sellingPrice,reserve:this.state.reserve,SKU:this.state.SKU,paymentMethod:this.state.paymentMethod,transactionDetails:this.state.transactionDetails,amountReceived:this.state.amountReceived,images:this.state.images}).then(function(){window.alert("update finished")}).catch(function(e){console.log(e),window.alert("update failed")})}},{key:"render",value:function(){return y.a.createElement(Q,G({},this.state,{onStatusChangeHandler:this.onStatusChangeHandler.bind(this),onClientCodeChangeHandler:this.onClientCodeChangeHandler.bind(this),onTitleChangeHandler:this.onTitleChangeHandler.bind(this),onBrandChangeHandler:this.onBrandChangeHandler.bind(this),onModelNumberChangeHandler:this.onModelNumberChangeHandler.bind(this),onWeightChangeHandler:this.onWeightChangeHandler.bind(this),onQuantityChangeHandler:this.onQuantityChangeHandler.bind(this),onCategoryChangeHandler:this.onCategoryChangeHandler.bind(this),onDimensionsChangeHandler:this.onDimensionsChangeHandler.bind(this),onDescriptionChangeHandler:this.onDescriptionChangeHandler.bind(this),onLocationChangeHandler:this.onLocationChangeHandler.bind(this),onImagesChangeHandler:this.onImagesChangeHandler.bind(this),onListedPriceChangeHandler:this.onListedPriceChangeHandler.bind(this),onSellingPriceChangeHandler:this.onSellingPriceChangeHandler.bind(this),onReserveChangeHandler:this.onReserveChangeHandler.bind(this),onPaymentMethodChangeHandler:this.onPaymentMethodChangeHandler.bind(this),onTransactionDetailsChangeHandler:this.onTransactionDetailsChangeHandler.bind(this),onAmountReceivedChangeHandler:this.onAmountReceivedChangeHandler.bind(this),onSubmitHandler:this.onSubmitHandler.bind(this)}))}}])&&V(n.prototype,a),o&&V(n,o),t}();function ee(e){return(ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function te(){return(te=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function ne(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function ae(e,t){return!t||"object"!==ee(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function oe(e){return(oe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function re(e,t){return(re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ie=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ae(this,oe(t).call(this,e))}var n,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&re(e,t)}(t,y.a.Component),n=t,(a=[{key:"render",value:function(){var e=this;return y.a.createElement(b.Fragment,null,y.a.createElement(C,null),y.a.createElement(v.Route,{exact:!0,path:"/",render:function(t){return y.a.createElement(T,te({},t,{obj:e.props.objs}))}}),y.a.createElement(v.Route,{path:"/create",render:function(t){return y.a.createElement(W,te({},t,{obj:e.props.obj}))}}),y.a.createElement(v.Route,{path:"/product",render:function(t){return y.a.createElement($,te({},t,{obj:e.props.obj}))}}))}}])&&ne(n.prototype,a),o&&ne(n,o),t}(),le=n(3),se=n.n(le),ce=s.a.Router();ce.get("/",function(e,t){se.a.find().then(function(n){var a=f.a.renderToString(y.a.createElement(v.StaticRouter,{location:e.url,context:{}},y.a.createElement(ie,{objs:n})));t.render("home",{title:"home",app:a,__INITIALDATA__:n})}).catch(function(e){console.log("Getting products list failed,error msg is :"+e),t.status(500).send("create InitialData failed")})});var ue=ce,de=n(13),me=n.n(de),pe=n(7),he=n.n(pe),ge=me()(1e7,99999999),fe=s.a.Router(),be=he.a.diskStorage({destination:function(e,t,n){n(null,"./public/images")},filename:function(e,t,n){n(null,t.fieldname+"-"+Date.now()+u.a.extname(t.originalname))}}),ye=he()({storage:be});fe.get("/:id",function(e,t){console.log("req.params.id 是"+e.params.id),se.a.findById(e.params.id).then(function(n){var a=f.a.renderToString(y.a.createElement(v.StaticRouter,{location:e.baseUrl+e.url,context:{}},y.a.createElement(ie,{obj:n})));t.render("create",{title:"create",app:a,__INITIALDATA__:n})}).catch(function(e){return console.log(e)})}),fe.get("/",function(e,t){console.log("req.params.id不存在"),console.log("req.url是"+e.url);var n=f.a.renderToString(y.a.createElement(v.StaticRouter,{location:e.baseUrl,context:{}},y.a.createElement(ie,{obj:null})));t.render("create",{title:"create",app:n,__INITIALDATA__:null})}),fe.post("/",ye.array("imagesUpload",10),function(e,t){console.log(e.body),console.log(e.files);var n=new se.a;n.clientCode=JSON.parse(e.body.clientCode),n.brand=JSON.parse(e.body.brand),n.modelNumber=JSON.parse(e.body.modelNumber),n.dimensions=JSON.parse(e.body.dimensions),n.weight=JSON.parse(e.body.weight),n.quantity=JSON.parse(e.body.quantity),n.title=JSON.parse(e.body.title),n.category=JSON.parse(e.body.category),n.description=JSON.parse(e.body.description),n.listedPrice=JSON.parse(e.body.listedPrice),n.sellingPrice=JSON.parse(e.body.sellingPrice),n.reserve=JSON.parse(e.body.reserve),n.location=JSON.parse(e.body.location),n.stage=JSON.parse(e.body.stage),n.status="Pending List",n.SKU=JSON.parse(e.body.SKU),console.log(e.body),console.log("parse _id "+e.body._id),null!==JSON.parse(e.body._id)?n._id=o.a.Types.ObjectId(JSON.parse(e.body._id)):n._id=null,n.images=JSON.parse(e.body.images);for(var a=0;a<e.files.length;a++)n.images.push(e.files[a].path);console.log(n.images),n.SKU||(n.SKU=ge()),console.log("stage =",e.body.stage),4==e.body.stage&&(n.status="Item Available"),console.log("productID是"+n._id),null!==n._id?se.a.findOneAndUpdate({_id:n._id},n).then(function(){t.send("updated")}).catch(function(e){console.log(e),t.status(400),t.send("update Failed")}):n.save().then(function(){console.log("new Product saved to database"),t.send("Product created")}).catch(function(e){console.log(e),t.status(400),t.send("Create Failed")})});var ve=fe,Ce=s.a.Router();Ce.get("/:id",function(e,t){console.log("req.params.id 是"+e.params.id),se.a.findById(e.params.id).then(function(n){var a=f.a.renderToString(y.a.createElement(v.StaticRouter,{location:e.baseUrl+e.url,context:{}},y.a.createElement(ie,{obj:n})));t.render("create",{title:"create",app:a,__INITIALDATA__:n})}).catch(function(e){return console.log(e)})});var Ee=Ce,Se=s.a.Router();Se.put("/:id",function(e,t){console.log("将要更新数据");var n=o.a.Types.ObjectId(e.params.id);se.a.findOneAndUpdate({_id:n},e.body).then(function(){t.send("update success")}).catch(function(e){return console.log(e)})});var Ne=Se;n(14).config();var He=s()();console.log(process.env.DB_URI),o.a.connect(process.env.DB_URI,{useNewUrlParser:!0});var Pe=o.a.connection;Pe.on("open",function(){console.log("MongoDB is opened")}),Pe.on("error",function(e){console.log(e)}),He.set("view engine","ejs"),He.use(h()("dev")),He.use(s.a.json()),He.use(s.a.urlencoded({extended:!1})),He.use(m()()),He.use(s.a.static(u.a.join(__dirname,"public"))),He.use("/create",ve),He.use("/update",Ne),He.use("/product",Ee),He.use("/",ue),He.use(function(e,t,n){n(i()(404))});var je=process.env.PORT||3e3;He.listen(je,function(){console.log("Server is listening on port ".concat(je))})},function(e,t,n){var a=n(4),o=new a.Schema({_id:a.Schema.Types.ObjectId,status:String,SKU:Number,condition:String,clientCode:String,brand:String,modelNumber:String,dimensions:String,weight:Number,quantity:Number,title:String,category:String,description:String,images:[String],listedPrice:Number,sellingPrice:Number,reserve:Number,location:String,paymentMethod:String,transactionDetails:String,amountReceived:String,stage:Number});e.exports=o}]);